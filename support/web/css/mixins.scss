@use "sass:selector";
@use "vars.scss" as *;

@mixin left-bordered($bg) {
  & {
    border-inline-start:  $left-border-width solid $bg;
    padding-inline-start: $left-border-distance;
  }

  @at-root div.hover-popup & {
    border-inline-start: 0;
    padding-inline-start: 0;

    &:before {
      display: none;
    }
  }

  @include widescreen {
    position: relative;

    border-inline-start:  unset;
    padding-inline-start: unset;

    &:before {
      content: " ";
      background-color: $bg;

      height: 100%;
      width: $left-border-width;

      position: absolute;
      left: calc(-1 * #{$left-border-distance} - #{$left-border-width});
    }
  }
}

@mixin material($bg) {
  box-sizing: border-box;
  margin-block: var(--parskip);

  >:nth-child(1)      { margin-block-start: 0; }
  >:nth-last-child(1) { margin-block-end: 0; }

  @include left-bordered($bg);
}

@mixin highlight($name, $bg, $icon) {
  div.#{$name}, span.#{$name}, details.#{$name} {
    .highlight-icon {
      fill: $icon;
      color: $icon;

      display: flex;
      gap: 0.5em;
      align-items: center;
      margin-bottom: 0.3em;
    }
  }

  div.#{$name}, details.#{$name} {
    > :nth-child(2) {
      margin-block-start: 0.25em;
    }
    @include material($bg);
  }
}

@mixin centered-contents {
  display: flex;
  flex-direction: column;
  align-items: center;
}

@mixin monospaced {
  font-family: 'Julia Mono', 'Iosevka', 'Fantasque Sans Mono', 'Roboto Mono', monospace;
  font-weight: 500;
  font-size:   var(--code-font-size);

  font-variant-ligatures: none;
}

@mixin widescreen {
  @media only screen and (min-width: $desktop-layout-width) {
    @content;
  }
}

@mixin shrink {
  --parskip: #{$shrink * $parskip};

  div.diagram-container img.diagram {
    height: calc($shrink * var(--height));
  }
}
